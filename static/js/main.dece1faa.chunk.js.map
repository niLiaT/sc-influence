{"version":3,"sources":["CommentsBar.js","UndirectedGraph.js","hooks/useD3.js","App.js","reportWebVitals.js","index.js"],"names":["CommentsBar","props","useState","id","comments","data","setData","useEffect","requestOptions","method","headers","body","JSON","stringify","account","fetch","then","response","json","console","log","className","map","d","onClick","window","open","article","opinion","UndirectedGraph","selectedAccount","setSelect","ref","renderChartFn","dependencies","React","useRef","d3","current","useD3","svg","selectAll","remove","color","domain","range","height","width","links","Object","create","nodes","simulation","force","nodeId","strength","value","attr","link","append","join","node","change","call","on","event","active","alphaTarget","restart","fx","x","fy","y","drag","fade","target","text","group","linkedById","opacity1","opacity2","style","o","a","b","thisOpacity","this","setAttribute","source","index","forEach","Math","max","min","marginRight","marginLeft","App","state","setState","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dece1faa.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './CommentsBar.css';\n\nfunction CommentsBar(props) {\n  const [data, setData] = useState({\n      id: \"\",\n      comments: []\n  })\n\n  useEffect(() => {\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ id: props.account })\n    };\n    fetch('http://13.125.82.153:8000/get-data/comments', requestOptions)\n        .then(response => response.json())\n        .then(data => setData({\n          id: props.account,\n          comments: data\n        }));\n    }, [props.account])\n\n  console.log(data.comments)\n\n  return (\n    <div className=\"comments-wrapper\">\n      <div>{ data.id }</div>\n      { data.comments.map(\n        d => (\n          <div className=\"comment\" onClick={ () => window.open(d.article, \"_blank\") } key={ d.id } >{ d.opinion }</div>\n        )\n      ) }\n    </div>\n  )\n}\n\nexport default CommentsBar;","// Model d3 as a component\n\nimport { useD3 } from './hooks/useD3'\nimport React, { useState }from 'react';\nimport * as d3 from 'd3';\nimport CommentsBar from './CommentsBar';\nimport './UndirectedGraph.css';\n\nfunction UndirectedGraph({ data }) {\n  const [selectedAccount, setSelect] = useState(\"\")\n\n  const ref = useD3(\n    (svg) => {\n      svg.selectAll(\"*\").remove();\n\n      const drag = simulation => {\n        function dragstarted(event, d) {\n          if (!event.active) simulation.alphaTarget(0.3).restart();\n          d.fx = d.x;\n          d.fy = d.y;\n        }\n\n        function dragged(event, d) {\n          d.fx = event.x;\n          d.fy = event.y;\n        }\n\n        function dragended(event, d) {\n          if (!event.active) simulation.alphaTarget(0);\n          d.fx = null;\n          d.fy = null;\n        }\n\n        return d3.drag()\n          .on(\"start\", dragstarted)\n          .on(\"drag\", dragged)\n          .on(\"end\", dragended);\n      }\n\n      var color = d3.scaleOrdinal()\n        .domain([0, 1])\n        .range([\"green\", \"red\"])\n\n      const height = 1080\n      const width = 1920\n\n      const links = data.links.map(d => Object.create(d));\n      const nodes = data.nodes.map(d => Object.create(d));\n\n      const simulation = d3.forceSimulation(nodes)\n        .force(\"link\", d3.forceLink(links).id(d => d.nodeId).strength(d => d.value * 0.04))\n        .force(\"charge\", d3.forceManyBody().strength(-100))\n        .force(\"x\", d3.forceX())\n        .force(\"y\", d3.forceY());\n\n      svg.attr(\"viewBox\", [-width / 2, -height / 2, width, height]);\n\n      const link = svg.append(\"g\")\n        .attr(\"stroke\", \"#999\")\n        .attr(\"stroke-opacity\", 0.7)\n        .selectAll(\"line\")\n        .data(links)\n        .join(\"line\")\n        .attr(\"stroke-width\", d => d.value ** -1.5);\n\n      const node = svg.append(\"g\")\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"stroke-width\", 1.5)\n        .selectAll(\"circle\")\n        .data(nodes)\n        .join(\"circle\")\n        .attr(\"r\", 12)\n        .attr(\"fill\", d => color(d.change))\n        .attr(\"opacity\", 1)\n        .attr(\"id\", d => d.nodeId)\n        .call(drag(simulation))\n        .on(\"mouseover.fade\", fade(0.1, 0.1))\n        .on(\"mouseout.fade\", fade(1, 0.7))\n        .on(\"click\", d => setSelect(d.target.id));\n        \n        node.append(\"title\")\n        .text(d => d.nodeId + \"\\n\" + d.group);\n\n      const linkedById = {};\n      data.links.forEach(d => {\n        linkedById[`${d.source},${d.target}`] = 1;\n      });\n\n      function isConnected(a, b) {\n        return linkedById[`${a},${b}`] || linkedById[`${b},${a}`] || a === b;\n      }\n\n      function fade(opacity1, opacity2) {\n        return d => {\n          node.style('stroke-opacity', function (o) {\n            const thisOpacity = isConnected(d.target.id, o.nodeId) ? 1 : opacity1;\n            this.setAttribute('fill-opacity', thisOpacity);\n            return thisOpacity;\n          });\n\n          link.style('stroke-opacity', o => (nodes[o.source.index].nodeId === d.target.id || nodes[o.target.index].nodeId === d.target.id ? 1 : opacity2));\n        };\n      }\n\n      simulation.on(\"tick\", () => {\n        link\n          .attr(\"x1\", d => d.source.x = Math.max(-width / 2, Math.min(width / 2, d.source.x)))\n          .attr(\"y1\", d => d.source.y = Math.max(-height / 2, Math.min(height / 2, d.source.y)))\n          .attr(\"x2\", d => d.target.x = Math.max(-width / 2, Math.min(width / 2, d.target.x)))\n          .attr(\"y2\", d => d.target.y = Math.max(-height / 2, Math.min(height / 2, d.target.y)));\n\n        node\n          .attr(\"cx\", d => d.x = Math.max(-width / 2, Math.min(width / 2, d.x)))\n          .attr(\"cy\", d => d.y = Math.max(-height / 2, Math.min(height / 2, d.y)));\n      });\n    }\n  );\n\n  // Render svg as a plot area\n  return (\n    <div className=\"wrapper\" >\n      <svg\n        ref={ref}\n        style={{\n          height: \"100%\",\n          width: \"auto\",\n          marginRight: \"0px\",\n          marginLeft: \"0px\",\n        }}\n        >\n        <g className=\"plot-area\" />\n        <g className=\"x-axis\" />\n        <g className=\"y-axis\" />\n      </svg>\n      <CommentsBar account={ selectedAccount } ></CommentsBar>\n    </div>\n  );\n}\n\nexport default UndirectedGraph;","// D3js directly manipulate to the DOM when Reactjs is not. Create a react hook to make d3 be useable.\n\nimport React from 'react';\nimport * as d3 from 'd3';\n\nexport const useD3 = (renderChartFn, dependencies) => {\n  const ref = React.useRef();\n\n  React.useEffect(() => {\n    renderChartFn(d3.select(ref.current));\n    return () => { };\n  }, dependencies);\n  return ref;\n}","import React, { Component } from 'react';\nimport './App.css';\n\nimport UndirectedGraph from './UndirectedGraph';\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tnodes: [],\n\t\t\tlinks: []\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tfetch('http://13.125.82.153:8000/api/graph/')\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tnodes: data.nodes,\n\t\t\t\t\tlinks: data.links\n\t\t\t\t})\n\t\t\t})\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t<header className=\"App-header\">\n\t\t\t\t\t<UndirectedGraph data={ this.state } />\n\t\t\t\t</header>\n\t\t\t</div>\n\t\t)}\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}